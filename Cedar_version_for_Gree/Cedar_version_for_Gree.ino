#include <IRremote.h>                  // 引用 IRRemote 函式库
#include <avr/pgmspace.h>
#include <avr/wdt.h>             // flash数据存储
#include <VoiceRecognition.h>    // 语音识别函数库
VoiceRecognition Voice;

// DATA BASE Infra
//Cold:
const PROGMEM unsigned int rawCodes_ac_16c[139] = {8916,4440,676,1604,680,516,676,516,676,1604,676,1604,676,1604,676,516,676,520,676,516,676,516,656,536,676,516,676,516,676,516,672,520,676,516,676,516,680,512,676,520,676,512,680,516,652,1628,676,516,676,1604,676,1604,660,532,676,516,676,520,652,1624,680,516,652,1628,676,516,676,516,676,1604,676,520,676,19812,696,516,676,520,676,516,676,516,676,1608,676,516,652,544,676,516,676,520,672,1608,676,516,676,520,676,516,652,1628,676,520,676,516,676,520,676,516,676,516,676,516,676,520,676,516,676,520,676,516,676,520,676,516,676,520,676,516,676,1604,676,1608,676,1604,676,520,676,
};  // 16c code
const PROGMEM unsigned int rawCodes_ac_17c[139] = {8916,4440,676,1604,676,516,676,516,676,1604,676,1604,680,1600,676,516,676,516,680,1604,676,512,680,516,676,516,676,516,676,516,676,516,676,516,676,516,680,516,676,516,676,516,676,512,676,1604,680,516,676,1604,676,1604,680,516,676,516,676,516,680,1600,680,512,676,1604,680,516,676,516,676,1604,676,516,680,19812,696,516,680,516,676,516,676,516,676,1604,676,520,676,516,676,520,676,516,676,1604,676,520,676,516,676,516,676,1604,680,512,680,516,676,516,676,516,676,520,676,516,676,516,676,516,676,516,676,520,676,516,676,516,680,516,676,516,676,516,680,512,680,516,676,1604,680,
};  // 17c code
const PROGMEM unsigned int rawCodes_ac_18c[139] = {8920,4436,680,1600,676,520,676,512,680,1600,680,1604,676,1604,676,516,676,516,676,516,676,1604,676,520,676,516,676,516,676,516,676,516,676,516,676,516,676,516,676,516,676,516,676,516,676,1604,680,516,676,1604,680,1600,680,516,676,516,676,516,676,1604,676,516,680,1600,680,516,676,516,676,1604,680,512,680,19832,676,520,676,512,680,516,676,516,676,1604,680,512,680,516,680,516,676,516,676,1604,680,516,676,516,680,512,676,1608,676,516,676,516,680,516,676,516,676,516,680,516,676,516,676,520,676,516,676,516,680,516,676,516,676,516,676,516,676,1604,676,516,680,516,676,1604,680,
};  // 18c code
const PROGMEM unsigned int rawCodes_ac_19c[139] = {8916,4436,680,1604,676,516,680,512,676,1604,676,1604,676,1604,676,520,676,516,676,1604,680,1600,680,516,676,516,676,516,676,516,676,516,676,516,680,512,676,516,676,520,676,512,680,516,676,1604,676,516,676,1604,676,1604,680,512,676,520,676,516,676,1604,676,516,676,1604,680,512,680,516,676,1604,676,516,676,19816,696,520,672,520,672,520,676,520,672,1604,680,516,680,512,676,520,676,516,680,1604,672,520,676,516,676,516,676,1604,680,516,676,516,680,516,676,516,676,520,676,516,676,516,676,516,680,516,676,516,680,512,680,516,676,516,676,516,680,516,676,1604,676,516,676,1608,676,
};  // 19c code
const PROGMEM unsigned int rawCodes_ac_20c[139] = {8920,4436,680,1604,676,516,676,516,676,1604,680,1600,680,1600,676,520,676,516,680,512,676,516,676,1604,680,512,680,512,676,520,676,516,676,516,676,516,676,516,676,516,676,516,676,516,676,1604,676,516,676,1608,676,1604,676,516,676,516,676,516,676,1604,676,516,676,1604,680,516,676,516,676,1604,676,516,676,19812,700,516,676,516,676,516,680,516,676,1604,680,516,676,516,676,516,676,520,676,1604,676,516,676,520,676,516,676,1604,680,516,676,516,676,520,672,520,672,516,680,516,676,516,676,516,680,516,676,516,676,520,676,516,676,516,676,516,680,1600,680,1604,676,516,676,1604,680,
};  // 20c code
const PROGMEM unsigned int rawCodes_ac_21c[139] = {8928,4428,664,1636,644,548,648,544,648,1632,648,1632,648,1632,648,548,644,548,648,1632,644,548,644,1636,648,544,648,544,648,544,648,548,644,548,644,548,648,544,644,544,648,544,648,544,648,1636,644,548,644,1636,648,1632,648,548,648,544,648,544,648,1632,648,544,648,1632,648,548,648,544,648,1632,648,548,644,19840,672,544,648,548,644,548,644,548,644,1636,648,544,648,548,648,544,648,544,648,1636,648,544,648,548,648,544,648,1632,648,544,648,548,648,544,648,548,644,544,648,548,648,544,648,544,648,548,648,544,648,548,644,548,644,548,644,548,648,544,652,544,648,1632,648,1636,648,
};  // 21c code
const PROGMEM unsigned int rawCodes_ac_22c[139] = {8904,4448,648,1632,648,544,648,544,648,1632,652,1628,652,1628,652,544,648,544,648,544,648,1632,648,1636,644,544,648,544,652,540,648,548,644,548,648,544,648,544,648,544,648,544,648,544,648,1632,648,544,648,1632,648,1632,652,544,648,544,644,552,644,1632,648,544,648,1632,648,544,648,544,648,1632,648,548,644,19844,668,548,648,544,652,544,648,544,648,1632,652,540,652,544,648,544,652,544,648,1632,648,544,652,548,644,544,648,1632,648,544,652,540,652,544,648,544,648,548,648,544,648,544,648,544,652,540,648,548,648,544,648,548,648,544,648,548,644,1636,648,544,652,1628,648,1636,648,
};  // 22c code
const PROGMEM unsigned int rawCodes_ac_23c[139] = {8928,4428,668,1632,648,544,648,544,648,1632,648,1632,648,1632,652,544,648,544,648,1632,648,1632,648,1632,648,544,648,544,648,544,648,544,648,548,644,548,644,548,644,548,648,544,648,544,648,1632,644,548,648,1632,648,1632,652,544,648,544,648,544,648,1632,648,544,644,1636,648,544,648,544,648,1632,648,544,652,19840,668,548,644,548,648,544,648,544,648,1632,652,544,648,544,648,548,648,544,648,1632,648,548,648,544,648,548,644,1636,648,544,648,548,648,548,648,544,648,544,648,548,644,548,644,548,648,544,648,548,648,544,648,544,648,548,644,548,648,544,648,1632,652,1632,648,1632,648,
};  // 23c code 
const PROGMEM unsigned int rawCodes_ac_24c[139] = {8936,4436,680,1600,656,540,652,540,652,1628,652,1628,652,1628,652,544,648,544,652,540,652,540,652,540,676,1604,652,540,652,540,652,540,652,540,652,540,652,540,656,536,656,540,652,540,652,1628,652,540,676,1604,656,1628,652,540,648,544,652,540,652,1628,652,540,652,1632,652,540,652,540,652,1628,656,536,656,19836,672,544,652,540,652,540,652,540,656,1624,652,544,652,540,652,544,648,544,652,1628,652,544,648,544,652,540,652,1628,652,540,652,544,652,540,652,544,652,540,652,540,652,544,648,544,652,540,652,544,652,540,656,540,652,540,652,540,652,1628,660,1620,652,1632,652,1628,656,
};  // 24 code
const PROGMEM unsigned int rawCodes_ac_25c[139] = {8936,4436,680,1600,656,540,652,540,652,1628,652,1628,652,1628,652,544,648,544,652,540,652,540,652,540,676,1604,652,540,652,540,652,540,652,540,652,540,652,540,656,536,656,540,652,540,652,1628,652,540,676,1604,656,1628,652,540,648,544,652,540,652,1628,652,540,652,1632,652,540,652,540,652,1628,656,536,656,19836,672,544,652,540,652,540,652,540,656,1624,652,544,652,540,652,544,648,544,652,1628,652,544,648,544,652,540,652,1628,652,540,652,544,652,540,652,544,652,540,652,540,652,544,648,544,652,540,652,544,652,540,656,540,652,540,652,540,652,1628,660,1620,652,1632,652,1628,656,
};  // 25c code
const PROGMEM unsigned int rawCodes_ac_26c[139] = {8908,4448,668,1632,648,548,648,544,648,1632,636,1644,648,1632,624,572,620,572,648,544,624,1656,648,548,624,1656,644,548,620,572,648,544,648,544,648,544,648,548,624,568,620,568,624,572,624,1656,648,544,624,1660,620,1660,648,544,648,544,624,572,620,1656,648,548,620,1660,644,548,624,568,624,1656,624,572,644,19840,648,572,648,544,648,544,624,572,648,1632,644,548,648,548,644,548,632,564,644,1632,624,572,644,548,648,544,624,1660,624,568,648,548,624,572,644,548,620,572,648,548,620,572,620,572,644,548,648,548,624,568,648,544,624,572,648,544,624,1656,624,572,644,548,624,572,644,
};  // 26c code
const PROGMEM unsigned int rawCodes_ac_27c[139] = {8916,4436,676,1604,676,516,680,512,676,1608,676,1600,680,1600,676,520,676,516,676,1604,676,1604,676,516,676,1604,676,516,676,516,680,512,676,520,672,520,676,516,676,516,676,516,676,516,676,1604,676,516,680,1604,680,1600,680,516,676,516,676,520,676,1604,672,520,676,1604,676,516,676,516,680,1604,672,520,676,19832,676,520,676,520,676,516,676,516,676,1604,676,516,676,520,676,516,676,520,676,1604,676,516,676,520,676,516,676,1604,680,516,676,520,676,516,676,516,680,512,680,512,684,512,676,516,676,516,676,524,672,516,680,516,676,516,680,516,672,520,676,1604,676,516,676,520,676,
};  // 27c code
const PROGMEM unsigned int rawCodes_ac_28c[139] = {8916,4440,676,1604,676,516,680,512,676,1604,680,1600,680,1600,680,516,676,516,676,516,676,516,676,1604,676,1604,680,516,676,512,680,516,676,516,676,516,676,516,676,516,676,516,676,516,676,1608,672,516,676,1608,676,1604,676,516,676,516,676,516,676,1604,680,516,676,1600,680,516,676,516,676,1604,676,516,680,19828,680,516,676,516,676,520,676,516,676,1604,676,516,676,516,680,516,676,516,676,1604,680,516,676,516,676,520,676,1600,680,516,676,520,676,516,676,520,676,516,676,516,676,516,676,520,676,516,676,520,672,520,676,516,676,516,676,520,676,1604,676,1604,676,520,676,516,676,
};  // 28c code
const PROGMEM unsigned int rawCodes_ac_29c[139] = {8932,4440,656,1628,652,544,648,540,652,1628,652,1628,652,1628,656,536,652,548,648,1628,652,544,648,1632,648,1632,652,540,648,544,652,540,648,544,648,544,652,540,648,540,652,544,648,544,648,1628,656,540,652,1628,652,1628,656,540,652,540,652,544,648,1628,652,544,648,1632,652,544,648,544,648,1628,652,544,648,19840,672,544,652,544,648,544,648,544,648,1628,652,544,648,548,648,544,648,544,652,1632,648,544,652,544,648,544,648,1632,648,544,652,544,648,544,652,544,648,544,648,544,652,544,648,540,652,544,652,544,648,544,648,544,652,544,648,544,648,544,652,544,648,1632,648,544,652,
};  // 29c code
//Warm:
const PROGMEM unsigned int rawCodes_ac_20w[139] = {8928,4444,652,544,648,544,648,1632,648,1636,644,1640,640,1636,644,1636,648,552,640,548,648,540,648,1640,640,548,644,548,644,552,640,544,648,548,644,548,648,544,648,544,648,552,640,544,648,1632,648,548,644,548,648,1632,644,556,640,548,644,548,644,1640,640,548,644,1636,648,544,648,544,648,1632,648,548,644,19844,668,1640,640,544,648,548,648,552,640,1640,644,544,648,548,644,548,648,552,640,1640,640,548,648,552,640,552,640,1636,644,548,644,552,644,552,640,556,640,548,644,548,648,544,648,548,644,548,644,548,648,548,648,544,648,544,644,1644,640,552,644,1632,648,1640,640,1644,640,
};  
const PROGMEM unsigned int rawCodes_ac_21w[139] = {8936,4424,668,544,644,548,644,1636,648,1632,648,1632,648,1632,652,1632,644,548,648,1632,648,544,648,1632,648,548,644,548,644,548,644,548,648,548,644,548,644,548,648,544,648,544,648,544,648,1632,648,544,648,548,648,1632,648,544,648,544,648,548,644,1636,648,544,648,1632,648,544,648,544,648,1632,652,544,648,19844,664,1632,648,548,648,544,648,544,648,1636,648,544,648,544,648,548,648,544,648,1632,648,548,644,548,644,548,648,1632,648,548,648,548,644,548,644,548,648,548,644,548,644,548,648,544,648,548,648,544,648,544,648,548,648,544,648,1632,648,1636,648,1632,648,1632,648,1636,648,
};  
const PROGMEM unsigned int rawCodes_ac_22w[139] = {8936,4420,668,544,652,540,648,1636,648,1628,652,1628,652,1628,648,1636,652,544,644,544,652,1632,652,1628,648,544,648,544,648,544,648,544,648,544,648,544,648,544,652,544,648,544,648,544,648,1632,648,544,648,548,648,1632,644,544,652,544,648,544,648,1632,648,544,648,1632,648,544,648,544,648,1632,648,544,652,19840,668,1632,648,548,648,544,648,548,648,1632,648,552,644,544,648,548,648,544,648,1632,648,548,648,544,648,544,652,1632,648,544,648,548,648,544,648,544,648,548,648,544,648,548,648,544,644,548,648,548,648,544,648,544,648,548,644,1636,648,544,652,544,648,544,648,548,648,
};  
const PROGMEM unsigned int rawCodes_ac_23w[139] = {8932,4440,652,544,648,544,648,1632,644,1636,648,1632,648,1632,648,1632,652,544,648,1632,648,1632,648,1632,648,544,648,544,648,544,648,548,644,548,648,544,648,544,648,544,648,544,648,544,648,1632,648,544,644,548,648,1632,648,548,644,548,644,548,644,1636,644,548,644,1632,648,548,648,544,648,1632,648,544,648,19840,672,1632,648,548,644,548,644,548,648,1632,648,544,648,548,644,548,648,548,644,1636,648,544,648,544,648,544,648,1636,648,548,644,552,644,548,648,544,648,544,648,544,648,548,648,544,648,548,644,548,648,548,644,548,648,544,648,1632,648,1632,648,548,648,544,648,548,644,
};  
const PROGMEM unsigned int rawCodes_ac_24w[139] = {8936,4436,648,544,652,540,652,1628,652,1632,648,1632,648,1632,648,1632,648,544,648,544,648,544,648,548,648,1632,648,544,648,544,648,544,648,544,648,548,644,544,652,540,648,548,648,544,648,1628,652,544,648,548,648,1628,652,544,648,544,648,544,648,1632,648,544,652,1628,652,544,648,544,648,1632,648,544,648,19844,668,1636,644,544,652,548,644,548,648,1632,648,544,648,544,648,548,648,544,648,1632,648,548,648,544,652,544,648,1632,648,548,648,544,652,544,648,540,652,544,648,544,648,544,652,540,652,544,652,540,652,540,652,544,648,544,652,1632,648,544,648,1632,648,548,648,544,648,
};  
const PROGMEM unsigned int rawCodes_ac_25w[139] = {8928,4424,668,544,648,544,648,1632,648,552,636,1636,648,1632,648,1632,648,552,640,1632,648,552,640,552,640,1636,648,548,644,544,648,544,648,552,640,548,644,544,648,552,640,552,640,544,648,1640,640,548,644,556,636,1644,640,548,644,552,640,548,648,1632,648,552,640,1632,648,552,640,552,640,1636,644,556,640,19864,644,548,648,544,648,544,648,548,648,1640,640,548,648,544,648,548,644,556,640,1632,648,556,640,544,648,544,648,1636,648,544,652,544,648,544,652,540,648,548,648,548,648,544,644,548,648,544,648,556,640,548,644,548,648,544,648,1632,648,1640,640,1632,652,544,648,1632,652,
};  
const PROGMEM unsigned int rawCodes_ac_26w[139] = {8916,4440,676,520,676,516,672,1604,676,1604,680,1600,676,1604,676,1608,676,516,676,516,676,1604,676,516,676,1604,676,516,680,512,680,516,676,516,676,516,676,516,676,516,676,520,672,520,676,1600,680,516,676,520,676,1604,676,516,676,516,676,516,680,1600,680,516,676,1604,676,516,676,520,676,1600,680,516,676,19832,676,520,676,516,676,516,676,520,676,1600,680,516,676,516,676,520,676,516,676,1604,676,520,676,516,676,516,676,1604,676,516,676,520,676,516,676,516,680,516,676,516,676,516,676,520,676,516,680,516,676,516,676,516,676,516,676,1608,676,516,676,516,676,1608,676,516,676,
};  
const PROGMEM unsigned int rawCodes_ac_27w[139] = {8920,4460,652,540,656,536,652,1628,652,1628,652,1628,652,1632,648,1628,656,540,652,1628,656,1628,648,540,652,1632,648,540,656,536,656,536,676,520,652,540,652,540,652,540,652,540,652,540,652,1628,652,540,652,544,652,1632,648,540,652,540,652,540,652,1628,656,540,652,1628,652,540,656,536,676,1604,680,512,656,19836,672,544,656,536,680,516,652,540,652,1628,676,516,680,516,652,540,680,516,652,1628,652,540,656,536,656,540,656,1624,656,540,652,540,652,540,652,540,652,540,652,540,656,536,656,540,652,540,652,540,680,512,656,540,652,540,652,1628,680,1600,656,540,652,1628,652,544,652,
};  
const PROGMEM unsigned int rawCodes_ac_30w[139] = {8932,4424,672,544,648,544,648,1632,648,1632,648,1632,648,1636,644,1632,648,544,648,544,648,1636,644,1632,648,1632,648,544,648,544,652,544,648,544,648,544,652,540,648,544,648,544,648,544,648,1632,648,544,648,544,652,1632,644,548,648,544,648,544,648,1632,648,548,648,1632,644,548,648,544,648,1636,644,544,648,19840,668,548,644,548,648,544,648,544,648,1636,648,544,648,544,648,548,648,544,648,1632,648,548,648,544,648,544,648,1636,648,544,648,544,648,548,644,548,648,552,640,544,648,544,648,548,648,544,648,548,648,544,648,544,648,544,648,1632,648,548,648,544,648,544,648,1636,648,
};  




const PROGMEM unsigned int rawCodes_ac_op[139] = {8936, 4424, 680, 1616, 676, 520, 680, 520, 680, 1612, 680, 1612, 680, 1612, 680, 1612, 680, 520, 680, 516, 680, 520, 680, 1612, 680, 520, 676, 520, 680, 520, 680, 516, 680, 520, 680, 520, 676, 520, 680, 520, 680, 516, 680, 520, 676, 1616, 680, 520, 680, 516, 680, 1612, 680, 520, 676, 524, 676, 520, 680, 1612, 680, 520, 676, 1616, 680, 520, 676, 520, 680, 1612, 680, 520, 680, 19876, 676, 520, 680, 520, 676, 520, 680, 496, 704, 1612, 680, 516, 684, 516, 680, 520, 680, 516, 680, 1612, 680, 520, 680, 520, 676, 520, 680, 1592, 700, 520, 680, 516, 680, 520, 680, 520, 676, 520, 680, 432, 764, 520, 680, 520, 680, 520, 676, 520, 680, 496, 700, 500, 700, 520, 680, 516, 680, 1616, 676, 1596, 700, 496, 700, 1616, 676
};  // open code
const PROGMEM unsigned int rawCodes_ac_cl[139] = {8956, 4408, 700, 1592, 700, 500, 700, 496, 700, 500, 700, 1592, 700, 1592, 700, 500, 700, 496, 700, 1556, 740, 496, 700, 476, 724, 1592, 700, 496, 704, 496, 700, 500, 700, 496, 700, 500, 700, 500, 700, 496, 676, 524, 700, 496, 704, 1588, 704, 496, 676, 524, 700, 1592, 700, 500, 700, 496, 700, 500, 700, 1592, 700, 500, 700, 1592, 700, 496, 700, 500, 700, 1592, 700, 500, 700, 19856, 700, 496, 704, 496, 700, 496, 704, 476, 720, 500, 700, 496, 704, 496, 700, 500, 700, 496, 700, 476, 724, 496, 704, 496, 700, 496, 704, 1564, 728, 496, 704, 496, 700, 496, 700, 500, 704, 496, 700, 496, 704, 496, 700, 500, 700, 496, 700, 500, 700, 496, 704, 496, 704, 496, 700, 496, 700, 1592, 704, 1592, 700, 1592, 700, 496, 704
};  // close code
const PROGMEM unsigned int rawCodes_ac_cold[139] = {8964, 4408, 700, 1564, 704, 496, 704, 516, 704, 1588, 684, 1608, 684, 1612, 680, 516, 704, 468, 732, 1588, 704, 496, 704, 1568, 700, 1612, 680, 520, 700, 496, 680, 520, 704, 492, 704, 496, 704, 496, 704, 492, 704, 496, 704, 492, 704, 1588, 708, 492, 680, 520, 704, 1588, 704, 496, 700, 496, 704, 496, 704, 1588, 704, 492, 684, 1612, 680, 516, 704, 496, 704, 1568, 700, 520, 704, 19848, 684, 516, 680, 520, 680, 516, 684, 516, 680, 516, 704, 496, 704, 492, 684, 516, 704, 496, 680, 520, 700, 496, 704, 496, 704, 492, 704, 1588, 684, 516, 704, 496, 704, 492, 704, 496, 704, 492, 704, 496, 704, 496, 704, 492, 704, 496, 704, 492, 704, 496, 704, 492, 708, 492, 704, 496, 704, 1588, 704, 1588, 704, 492, 708, 492, 704
};  // cold mode code
const PROGMEM unsigned int rawCodes_ac_warm[139] = {8936, 4428, 700, 500, 700, 500, 700, 1592, 676, 1616, 700, 1592, 676, 1592, 724, 1592, 700, 500, 676, 1616, 700, 1588, 680, 1620, 700, 496, 700, 500, 676, 520, 676, 488, 736, 500, 696, 500, 700, 500, 676, 480, 716, 524, 676, 524, 676, 1616, 696, 500, 676, 524, 676, 1616, 700, 500, 672, 524, 676, 524, 700, 1592, 676, 520, 704, 1592, 676, 520, 676, 524, 676, 1616, 676, 524, 700, 19852, 704, 1592, 676, 520, 676, 524, 700, 496, 676, 524, 676, 524, 700, 496, 676, 524, 700, 496, 676, 524, 676, 524, 700, 496, 704, 496, 676, 1616, 676, 500, 724, 496, 676, 524, 676, 520, 700, 500, 676, 524, 676, 520, 700, 500, 676, 520, 704, 496, 676, 524, 700, 496, 700, 500, 676, 524, 700, 496, 676, 524, 676, 520, 700, 500, 676
};  // warm mode code


int n;
int k;

int count = 0;
int count_close = 0;
int time_p = 0;

int buttonstate_op = 8; // open button
int buttonstate_on = 6;

int val_op = 0;  // Check state
int val_on = 0;  // Check state
int old_val_on = 0;
int state = 0;

int val = 0;            //存储获取到的PIR数值
int PIR_sensor = A0;    //指定PIR模拟端口 A0

#include <dht11.h>        // load temp and moisture detector
dht11 DHT11;
#define DHT11PIN 7
void(* resetFunc) (void) = 0; //制造重启命令

IRsend irsend;                          // 定义 IRsend 物件来发射红外线讯号


void setup()
{
  pinMode(PIR_sensor, INPUT);   //设置PIR模拟端口为输入模式
  pinMode(buttonstate_op, INPUT);
  pinMode(buttonstate_on, OUTPUT);

  pinMode(3, OUTPUT);

  Serial.begin(9600);    // 温度传感


}



void loop()
{

  while (1)
  {

  //  if (val_op == LOW)
  //  {
      digitalWrite(8, HIGH);
      



      val = analogRead(PIR_sensor);                        //DHT11温控模块，获取温湿度
      Serial.println();
      int chk = DHT11.read(DHT11PIN);
      Serial.print("Read sensor: ");
      Serial.print("Humidity (%): ");
      Serial.println((float)DHT11.humidity, 2);
      Serial.print("Temperature (oC): ");
      Serial.println((float)DHT11.temperature, 2);
      delay(2000);

      digitalWrite(8, LOW);


      if (val > 300)      // 人体红外传感数值  有人一般为600+ 没人则为0
      {
        Serial.print("count =");  // count值测试，决定温度区间
        Serial.print((int)count);
        count_close = 0;  // 红外感应关机条件，在有人的时候清零
        time_p = 0;       // 红外感应关机条件，计数器模块，可调节，在val值变化时清零

        if ((float)DHT11.temperature >= 24.0 and count == 0)
        {
          unsigned int shuzu_cl[139];
          for (k = 0; k < 139; k++)
          {
            shuzu_cl[k] = pgm_read_word_near(rawCodes_ac_cl + k);
          }
          irsend.sendRaw(shuzu_cl, 139, 38);
          Serial.println("cl code sended");
          count = 5;         //count变为5，不再满足=0条件，使16度代码只发送一次
          //测试count值
          Serial.print("count =");
          Serial.print((int)count);
          delay(10000);
        }


        if ((float)DHT11.temperature <= 20.0 and count == 0)
        {
          unsigned int shuzu_26w[139];
          for (k = 0; k < 139; k++)
          {
            shuzu_26w[k] = pgm_read_word_near(rawCodes_ac_26w + k);
          }
          irsend.sendRaw(shuzu_26w, 139, 38);
          Serial.println("26w code sended");
          count = 3;
          Serial.print("count =");
          Serial.print((int)count);
          delay(10000);
        }

        if (((float)DHT11.temperature > 20.0) and ((float)DHT11.temperature < 24.0))
        {
          count = 0;
          Serial.print("count =");
          Serial.print((int)count);
        }
      }
      else
      {

        if (count_close == 0 and time_p > 30) {
          unsigned int shuzu_cl[139];
          for (k = 0; k < 139; k++)
          {
            shuzu_cl[k] = pgm_read_word_near(rawCodes_ac_cl + k);
          }
          irsend.sendRaw(shuzu_cl, 139, 38);
          Serial.println("Close code sended");

          count_close = 5;
        }
        time_p = time_p + 1;
        delay(2000);
        Serial.print("time = ");
        Serial.print(time_p);
      }


  }
}
